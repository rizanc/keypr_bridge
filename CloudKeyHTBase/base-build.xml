<project name="Base" default="baseDist" basedir=".">
	<description>
        simple example build file
    </description>
	<!-- set global properties for this build -->
	<property name="base.src" location="./src" />
	<property name="base.res" location="./res" />
	<property name="base.lib" location="./lib" />
	<property name="base.build" location="./build" />
	<property name="base.build.res" location="${base.build}/res" />
	<property name="base.build.lib" location="${base.build}/lib" />
	<property name="base.dist" location="./dist" />
	<property name="base.dist.lib" location="${base.dist}/lib" />
	<property name="adapter.project.dir.lib" location="../CloudKeyTestAdapter/lib" />
	<property name="webservice.client.project.dir.lib" location="../CloudKeyPrWebServiceClient/WebContent/WEB-INF/lib" />
	<property name="webservice.project.dir.lib" location="../CloudKeyHTWebServices/WebContent/WEB-INF/lib" />
	<property name="dataharvester.project.dir.lib" location="../MicrosDataHarvester/lib" />
	<property name="microssimulator.oxi.project.dir.lib" location="../MicrosSimulator_OXI/WebContent/WEB-INF/lib" />
	<property name="microssimulator.ows.project.dir.lib" location="../MicrosSimulatorPMS_OWS/WebContent/WEB-INF/lib" />
	<property name="uploadservice.client.project.dir.lib" location="../UploadServiceRest/WebContent/WEB-INF/lib" />
	<property name="upload.service.project.dir.lib" location="../CloudKeyHTUploadService/lib" />
	<property name="micros.adapter.project.dir.lib" location="../MicrosPMSAdapter/lib" />


	<target name="init">
		<!-- Create the time stamp -->
		<tstamp />
		<!-- Create the build directory structure used by compile -->
		<mkdir dir="${base.build}" />
		<mkdir dir="${base.build.res}" />
		<mkdir dir="${base.build.lib}" />
		<!-- Create the distribution directory -->
		<mkdir dir="${base.dist.lib}" />
	</target>
	<!-- set the class path to compile -->
	<path id='compile.classpath'>
		<fileset dir='lib'>
			<include name='*.jar' />
		</fileset>
	</path>

	<!-- To delete the folders created on initialization -->
	<target name="clean" description="clean up">
		<!-- Delete the ${base.build} and ${base.dist} directory trees -->
		<delete dir="${base.build}" />
		<delete dir="${base.dist}" />
	</target>

	<!-- To compile source and add required files to be included in jar -->
	<target name="compile" depends="init" description="compile the source ">
		<!-- Compile the java code from ${base.src} into ${base.build} -->
		<javac includeantruntime="false" srcdir="${base.src}" destdir="${base.build}">
			<classpath refid="compile.classpath" />
		</javac>
		<!-- Copy the res folder to be included in jar  -->
		<copy todir="${base.build}/res">
			<fileset dir="${base.res}">
				<include name="*.*" />
				<type type="file" />
			</fileset>
		</copy>
		<!-- Copy the lib folder to be included in jar 
		<copy todir="${base.build}/lib">
			<fileset dir="${base.lib}">
				<include name="*.jar" />
				<type type="file" />
			</fileset>
		</copy> -->
	</target>

	<target name="baseDist" depends="clean,init,compile" description="generate the distribution">
		<!-- Put everything in ${base.build} into the base.jar file -->
		<jar jarfile="${base.dist}/lib/base.jar" basedir="${base.build}" duplicate="preserve"/>

		<!-- copy the base.jar to ${adapter.project.dir.lib} folder -->
		<copy todir="${adapter.project.dir.lib}" overwrite="true">
			<fileset dir="${base.dist}/lib">
				<include name="*.jar" />
				<type type="file" />
			</fileset>
		</copy>
		<!-- copy the base.jar to ${webservice.client.project.dir.lib} folder -->
		<copy todir="${webservice.client.project.dir.lib}" overwrite="true">
			<fileset dir="${base.dist}/lib">
				<include name="*.jar" />
				<type type="file" />
			</fileset>
		</copy>
		<!-- copy the base.jar to ${webservice.project.dir.lib} folder -->
		<copy todir="${webservice.project.dir.lib}" overwrite="true">
			<fileset dir="${base.dist}/lib">
				<include name="*.jar" />
				<type type="file" />
			</fileset>
		</copy>
	
		<!-- copy the base.jar to ${upload.service.project.dir.lib} folder -->
		<copy todir="${upload.service.project.dir.lib}" overwrite="true">
			<fileset dir="${base.dist}/lib">
				<include name="*.jar" />
				<type type="file" />
			</fileset>
		</copy>
		<!-- copy the base.jar to ${micros.adapter.project.dir.lib} folder -->
		<copy todir="${micros.adapter.project.dir.lib}" overwrite="true">
			<fileset dir="${base.dist}/lib">
				<include name="*.jar" />
				<type type="file" />
			</fileset>
		</copy>
	
		<!-- copy the base.jar to ${microssimulator.ows.project.dir.lib} folder -->
		<copy todir="${microssimulator.ows.project.dir.lib}" overwrite="true">
			<fileset dir="${base.dist}/lib">
				<include name="*.jar" />
				<type type="file" />
			</fileset>
		</copy>
		<!-- copy the base.jar to ${dataharvester.project.dir.lib} folder -->
		<copy todir="${dataharvester.project.dir.lib}" overwrite="true">
			<fileset dir="${base.dist}/lib">
				<include name="*.jar" />
				<type type="file" />
			</fileset>
		</copy>


	</target>


</project>